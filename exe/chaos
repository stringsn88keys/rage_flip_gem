#!/usr/bin/env ruby

require_relative '../lib/rage_flip'

text = ARGV.join(' ')

if text.empty?
  puts "Usage: chaos <text_to_chaos>"
  exit 1
end

chaos_level = ENV['CHAOS_LEVEL']&.to_i || 10
result = RageFlip::Chaos.process(text, chaos_level)

if RageFlip::Clipboard.copy(result)
  puts result
else
  puts "Failed to copy to clipboard, but here's your chaotic text:"
  puts result
end